{
  "Parameters": {
    "env": {
      "Type": "String",
      "Description": "Current Amplify CLI env name"
    }
  },
  "Resources": {
    "Vault23237E5B": {
      "Type": "AWS::Backup::BackupVault",
      "Properties": {
        "BackupVaultName": "ReSkillBackupVaultdev"
      },
      "UpdateReplacePolicy": "Retain",
      "DeletionPolicy": "Retain"
    },
    "ReSkillDbBackupPlanC36E7AEC": {
      "Type": "AWS::Backup::BackupPlan",
      "Properties": {
        "BackupPlan": {
          "BackupPlanName": {
            "Fn::Join": [
              "",
              [
                "ReSkillBackupPlan",
                {
                  "Ref": "env"
                }
              ]
            ]
          },
          "BackupPlanRule": [
            {
              "Lifecycle": {
                "DeleteAfterDays": 35
              },
              "RuleName": "Daily",
              "ScheduleExpression": "cron(0 5 * * ? *)",
              "TargetBackupVault": {
                "Fn::GetAtt": [
                  "Vault23237E5B",
                  "BackupVaultName"
                ]
              }
            },
            {
              "Lifecycle": {
                "DeleteAfterDays": 90
              },
              "RuleName": "Weekly",
              "ScheduleExpression": "cron(0 5 ? * SAT *)",
              "TargetBackupVault": {
                "Fn::GetAtt": [
                  "Vault23237E5B",
                  "BackupVaultName"
                ]
              }
            },
            {
              "Lifecycle": {
                "DeleteAfterDays": 365,
                "MoveToColdStorageAfterDays": 30
              },
              "RuleName": "Monthly1Year",
              "ScheduleExpression": "cron(0 5 1 * ? *)",
              "TargetBackupVault": {
                "Fn::GetAtt": [
                  "Vault23237E5B",
                  "BackupVaultName"
                ]
              }
            }
          ]
        }
      }
    },
    "ReSkillDbBackupPlanUserStackSelectionByTagRoleC6E2EF44": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "backup.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/service-role/AWSBackupServiceRolePolicyForBackup"
              ]
            ]
          }
        ]
      }
    },
    "ReSkillDbBackupPlanUserStackSelectionByTag328F5A8F": {
      "Type": "AWS::Backup::BackupSelection",
      "Properties": {
        "BackupPlanId": {
          "Fn::GetAtt": [
            "ReSkillDbBackupPlanC36E7AEC",
            "BackupPlanId"
          ]
        },
        "BackupSelection": {
          "IamRoleArn": {
            "Fn::GetAtt": [
              "ReSkillDbBackupPlanUserStackSelectionByTagRoleC6E2EF44",
              "Arn"
            ]
          },
          "ListOfTags": [
            {
              "ConditionKey": "user:Stack",
              "ConditionType": "STRINGEQUALS",
              "ConditionValue": {
                "Ref": "env"
              }
            }
          ],
          "SelectionName": "UserStackSelectionByTag"
        }
      }
    }
  },
  "Description": "{\"createdOn\":\"Mac\",\"createdBy\":\"Amplify\",\"createdWith\":\"9.1.0\",\"stackType\":\"custom-customCDK\",\"metadata\":{}}"
}